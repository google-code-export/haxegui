<?xml version="1.0" encoding="iso-8859-1"?>
<haxegui:Layout name="Example6">

    <!-- Transcriber -->
    <haxegui:Window name="Transcriber" x="300" y="40" width="500" height="400" sizeable="true" >
	<haxegui:Menubar name="Menubar" width="400" x="10" y="20" />
	<haxegui:Toolbar name="Toolbar" width="400" x="10" y="44" >
	    <haxegui:controls:Button name="Run" label="Run" x="30" y="4" />
	    <haxegui:controls:Button name="Clear" label="Clear" x="130" y="4" />
	</haxegui:Toolbar>

	<haxegui:ScrollPane name="ScrollPane1" x="10" y="84" >


		    <script type="text/hscript">

			
			var window = root.getChildByName("Transcriber");
			var toolbar = window.getChildByName("Toolbar");
			var scrollpane = window.getChildByName("ScrollPane1");

			var tf = new flash.text.TextField();
			tf.name = "HtmlTextArea";
			tf.type = flash.text.TextFieldType.INPUT;
			tf.multiline = true;
			tf.wordWrap = true;
			tf.background = true;
			tf.backgroundColor = 0xFFFFFF;
			tf.width = 800;
			tf.height = 1000;
			tf.mouseEnabled = true;
			tf.tabEnabled = true;

			
			
			var str = "var n = 6;\nvar factorial = 1;\nfor(i in factorial...n)\n\tfactorial *= i;\nn+\"! = \"+factorial;\n" ;
			str += "\n/*\nvar window = new haxegui.Window(this.getChildByName(\"ScrollPane1\"));\nwindow.box.width = 160;\nwindow.box.height = 120;\nwindow.init();\n\nvar container = new haxegui.Container(window, \"Container\", 10, 20);\ncontainer.init();\n*/";
	/*
	var cssLoader = new flash.net.URLLoader();
	var cssRequest = new flash.net.URLRequest("green.css");
	function cssLoadComplete(e)
	    {
		trace(e);
		styles.parseCSS(e.target.data);
	    }
	cssLoader.addEventListener(flash.events.Event.COMPLETE, cssLoadComplete);
	cssLoader.load(cssRequest);
	*/
			
		var styles = new flash.text.StyleSheet();
		styles.parseCSS(".code-line-numbers {    color:#809080;    border-right:1px dotted #809080;    float:left;    text-align:right;    width:2em;    padding-right:3px;    margin-right:12px;}.code-code {}.code-keyword {    font-weight: bold;    color: #000000;}.code-type {    font-weight: bold;    color: #106020;}.code-variable {    color: #004050;}.code-number {    color: #F08000;}.code-comment {    color: #208000;}.code-string {    color: #F00000;}");
		tf.styleSheet = styles;
		tf.htmlText = CodeHighlighter.highlight( str, "haxe") ;
		

		scrollpane.addChild(tf);


			
			function clear(e) { tf.text = ""; }

			var clearbtn = toolbar.getChildByName("Clear");
			clearbtn.addEventListener(flash.events.MouseEvent.MOUSE_UP, clear);			

			
			function run(e)
			    {
				var parser = new hscript.Parser();
				var program = parser.parseString(tf.text);
				var interp = new hscript.Interp();
				
				interp.variables.set( "this", window );
				ScriptStandardLibrary.set(interp);

				trace(interp.execute(program)); 
				
				root.getChildByName("Console").onRaise(null);
						
			    }

			    
			var runbtn = toolbar.getChildByName("Run");
			runbtn.addEventListener(flash.events.MouseEvent.MOUSE_UP, run);			
			

		    </script>
    
	</haxegui:ScrollPane>
    </haxegui:Window>
    

  
</haxegui:Layout>    
